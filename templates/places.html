<div id="container2">




		{% if locations %}
		  <table class="table">

		<tr><th>On Wikipedia: </th><th></th></tr>    

		    {% for key, value in locations.iteritems() %}

		<tr>
			<td><a href="http://en.wikipedia.org/wiki/{{ value['title'] }}">{{ value['title'] }}</a></td>
			<td><a href="http://{{ session.target_lang  }}.wikipedia.org/wiki/{{ value['title'] }}">{{ value['targetwiki'] }}</a></td>
		</tr>

		    {% endfor %}

		  </table>


		<div id="map-canvas"></div>

		  	{% else %}
		  	<p>We didn't find any!</p>
		    {% endif %}


<div>



    <script type="text/javascript">


	googleMaploader({{geocodes|safe}});


function googleMaploader(mapData) {

console.log("googleMaploader", mapData);
	var mapOptions = {
		center: { lat: 41.921, lng: -93.312}, 
		zoom: 3
    };
	var map = new google.maps.Map($('#map-canvas').get(0),
         mapOptions);

	$.each(mapData, function(key, value) {

console.log(key, value);
	
    	var marker = new google.maps.Marker({
			position: { lat: value["lat"], lng: value["lon"]},
			title: value["name"]
	    });

	    marker.setMap(map);

    });  
	
}    

    </script>

